WBd={scroll:false,scrolly:0,scrollx:0,scrolle:false,DMU:function(){var a=$(".draggable_droparea > .target");if(!(a.size()<1)){var b=a.get(0);if(!(!b||b==WBd.dragEl)){b=$(WBd.dragEl).find("a.dragdroplink:first").clone(true);if(!(b.size()<1)){a=a.find("a.dragdroplink:first").html();b.attr("href",b.attr("href").replace("%s",a));b.click()}}}WBd.clean()},clean:function(){$(".draggable_droparea").removeClass("drag_active");$(".WB_DRAG_BOX").hide();$(document).unbind("mousemove.drag",WBd.DMM).unbind("mouseup.drag",
WBd.DMU);$(".draggable_droparea > *").unbind("mouseover.drag").unbind("mouseout.drag").removeClass("target");WBd.VARS()},VARS:function(){WBd.dragEl=false;WBd.started=false},dMDn:function(a){if(!($(a.target).closest(".expand ul").size()>0)){$(document).bind("mouseup.drag",WBd.DMU);a=WBd.dragEl=this;var b=a.offsetWidth/2,c=a.offsetHeight/2;$("#WB_DRAG_BOX_TOP").height("30px").width(a.offsetWidth).css("marginTop",-(c+30)).css("marginLeft",-b);$("#WB_DRAG_BOX_BOTTOM").width(a.offsetWidth).css("marginTop",
c).css("marginLeft",-b);$("#WB_DRAG_BOX_LEFT").height(a.offsetHeight).width(1).css("marginTop",-c).css("marginLeft",-b);$("#WB_DRAG_BOX_RIGHT").height(a.offsetHeight).width(1).css("marginTop",-c).css("marginLeft",b);$(document).bind("mousemove.drag",WBd.DMM);return false}},DMM:function(a){if(a){if(!WBd.started){WBd.started=true;$(".draggable_droparea > *:not([class~=draggable_nodrop])").bind("mouseover.drag",function(){$(this).addClass("target")}).bind("mouseout.drag",function(){$(this).removeClass("target")});
$(".draggable_droparea").addClass("drag_active");$(".WB_DRAG_BOX").show()}var b,c,d=$(window);b=a.clientX+d.scrollLeft();c=a.clientY+d.scrollTop();$(".WB_DRAG_BOX").css("left",b).css("top",c);b=c=0;if(a.clientY<80)c=-30;else if(a.clientY+60>d.height())c=30;if(a.clientX<60)b=-30;else if(a.clientX+60>d.width())b=30;if(b===0&&c==0)WBd.SCR();else{WBd.scrollx=b;WBd.scrolly=c;WBd.scrolle=a;if(WBd.scroll===false)WBd.scroll=window.setInterval(function(){if(WBd.dragEl){window.scrollBy(WBd.scrollx,WBd.scrolly);
WBd.DMM(WBd.scrolle)}else WBd.SCR()},150)}return false}},SCR:function(){WBd.scroll&&window.clearInterval(WBd.scroll);WBd.scroll=WBd.scrolle=false}};
$(function(){WBd.VARS();$(".draggable_element").live("mousedown",WBd.dMDn);var a=$('<div style="position:absolute;z-index:10000;cursor:move;display:none;" class="WB_DRAG_BOX"></div>');a.clone().css("borderBottom","2px dashed #bbb").attr("id","WB_DRAG_BOX_TOP").appendTo("body");a.clone().css("borderLeft","2px dashed #bbb").attr("id","WB_DRAG_BOX_LEFT").appendTo("body");a.clone().css("borderTop","2px dashed #bbb").attr("id","WB_DRAG_BOX_BOTTOM").appendTo("body");a.clone().css("borderRight","2px dashed #bbb").attr("id",
"WB_DRAG_BOX_RIGHT").appendTo("body")});