$(function(){typeof gpLayouts!="undefined"&&$("body").bind("AdminReady",function(){LayoutSetup()});$(".layout_color_id").click(function(a){function e(){$("#layout_ident").hide();$(document).unbind("keydown.layout_close")}a.preventDefault();a=$(this).position();var f=this.title;$("#current_color").css("background-color",f);a=$("#layout_ident").show().css({left:a.left+20,top:a.top});var c=$(a).find("form").get(0);c&&$(this).find("input").each(function(b,d){if(c[d.name])c[d.name].value=d.value});$("#layout_ident a.color").unbind("click").bind("click",
function(){$("#current_color").css("background-color",this.title);c.color.value=this.title});$("#layout_ident input.cancel").unbind("click").bind("click",function(){e()});$(document).bind("keydown.layout_close",function(b){if(b.keyCode===27){b.preventDefault();e()}})});$(".draggable_element").live("mouseenter",function(){$this=$(this);if(!$this.hasClass("target")){$this.addClass("hover");$this.find("div").stop(true,true).fadeIn();$this.stop(true).fadeTo("200",1);var a=$this.height();$this.data("ph",
a);$this.height("auto").height()<a&&$this.height(a)}}).live("mouseleave",function(){$this.removeClass("hover");$this=$(this);$this.stop(true).fadeTo("slow",0.5);$this.find("div").stop(true,true).fadeOut();var a=$this.data("ph");parseInt(a)>0&&$this.height(a)})});
function LayoutSetup(){var a=$('<div class="draggable_droparea" id="theme_content_drop"></div>').appendTo("body");$(".output_area").each(function(e,f){var c=$(f),b=GetCoords(c),d=c.find(".gplinks");if(d.length>0){c.find("a.ExtraEditLink:first").clone().show().attr("class","").prependTo(c.find(".output_area_link"));if(b.h<20){c.height(20);b.h=20}if(b.w<20){c.width(20);b.w=20}$('<div class="draggable_element"></div>').css({position:"absolute",top:b.top,left:b.left}).height(b.h-3).width(b.w-3).append(d).fadeTo("slow",
0.5).appendTo(a)}});$("div.layout_links a").live("click",function(e){$("div.layout_links a").removeClass("selected");this.className="selected";$("div#area_lists div").hide();$("div#area_lists div."+this.name).show();e.preventDefault()})};